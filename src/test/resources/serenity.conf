webdriver {
  base.url = "https://todo-app.serenity-js.org/#/"
  autodownload = true
}

serenity.take.screenshots = FOR_FAILURES

serenity {
  project.name = "YourStore-SerenityBdd-Screenplay-TestLab"
  logging.level.root = "INFO"
  logging.level.net.serenitybdd = "DEBUG"
}

environment = remoteChrome

environments {
  localChrome {
    webdriver {
      driver = chrome
      autodownload = true
      capabilities {
        acceptInsecureCerts = true
        "goog:chromeOptions" {
          args = [
            "start-maximized",
            "test-type",
            "ignore-certificate-errors",
            "incognito",
            "disable-infobars",
            "disable-gpu",
            "disable-default-apps",
            "disable-popup-blocking"
          ]
        }
      }
    }
  }

  remoteChrome {
    webdriver {
      driver = "remote"
      remote.url = "http://selenium-hub:4444/wd/hub"  # Usa localhost si Serenity no est√° en Docker
      capabilities {
        browserName = "chrome"
        acceptInsecureCerts = true
        "goog:chromeOptions" {
          args = [
            "headless",
            "disable-gpu",
            "no-sandbox",
            "ignore-certificate-errors",
            "incognito",
            "disable-infobars",
            "disable-popup-blocking",
            "remote-allow-origins=*"
          ]
        }
      }
    }
  }

  localEdge {
    driver = edge
    autodownload = true
    webdriver {
      capabilities {
        browserName = "MicrosoftEdge"
        "ms:edgeOptions" {
          args = [
            "start-maximized",
            "test-type",
            "ignore-certificate-errors",
            "incognito",
            "disable-infobars",
            "disable-gpu",
            "disable-default-apps",
            "disable-popup-blocking"
          ]
        }
      }
    }
  }

  remoteEdge {
    webdriver {
      driver = "remote"
      remote {
        url = "http://selenium-hub:4444/wd/hub"
      }
      capabilities {
        browserName = "MicrosoftEdge"
        acceptInsecureCerts = true
        "ms:edgeOptions" {
          args = [
            "start-maximized",
            "test-type",
            "ignore-certificate-errors",
            "incognito",
            "disable-infobars",
            "disable-gpu",
            "disable-default-apps",
            "disable-popup-blocking"
          ]
        }
      }
    }
  }

  localFirefox {
    driver = firefox
    autodownload = true
    webdriver {
      capabilities {
        browserName = "firefox"
        pageLoadStrategy = "normal"
        acceptInsecureCerts = true
        unhandledPromptBehavior = "dismiss"
        strictFileInteractability = true

        "moz:firefoxOptions" {
          args = ["--start-maximized"]
          prefs {
            "javascript.options.showInConsole": false
          }
          log {
            level = "info"
          }
        }
      }
    }
  }

  remoteFirefox {
    webdriver {
      driver = "remote"
      remote {
        url = "http://selenium-hub:4444/wd/hub"
      }
      capabilities {
        browserName = "firefox"
        pageLoadStrategy = "normal"
        acceptInsecureCerts = true
        unhandledPromptBehavior = "dismiss"
        strictFileInteractability = true

        "moz:firefoxOptions" {
          args = ["--start-maximized" ,"-headless"]
          prefs {
            "javascript.options.showInConsole": false
          }
          log {
            level = "info"
          }
        }
      }
    }
  }
}
